<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FancyDialogs Editor</title>
    <link rel="stylesheet" href="styles.css?v=11">
</head>
<body>
    <div class="minecraft-container">
        <div class="mc-header">
            <div class="mc-title">FancyDialogs Editor</div>
            <div class="mc-subtitle">Create interactive dialogs for Minecraft 1.21.6+</div>
        </div>

        <div class="main-grid">
            <!-- Editor Panel -->
            <div class="mc-panel">
                <div class="mc-panel-title">‚öôÔ∏è Dialog Editor</div>

                <div class="mc-tabs">
                    <button class="mc-tab active" data-tab="basic">Basic</button>
                    <button class="mc-tab" data-tab="body">Body</button>
                    <button class="mc-tab" data-tab="inputs">Inputs</button>
                    <button class="mc-tab" data-tab="buttons">Buttons</button>
                </div>

                <!-- Basic Tab -->
                <div class="tab-content active" id="basic-tab">
                    <div class="mc-info-box">
                        üí° See <a href="https://github.com/TSERATO/FancyDialogs-Web-Editor/blob/main/README.md" target="_blank" class="info-link">README.md</a> for instructions
                    </div>

                    <label class="mc-label">Dialog ID:</label>
                    <input type="text" class="mc-input" id="dialog-id" placeholder="my_dialog" value="my_dialog">

                    <label class="mc-label">Title:</label>
                    <input type="text" class="mc-input" id="dialog-title" placeholder="<b><color:#ff7300>Title</color></b>" value="<b><color:#ff7300>My Dialog</color></b>">

                    <div class="mc-checkbox-group">
                        <input type="checkbox" class="mc-checkbox" id="can-close-escape" checked>
                        <label class="mc-label" for="can-close-escape" style="margin: 0;">Close with ESC</label>
                    </div>
                </div>

                <!-- Body Tab -->
                <div class="tab-content" id="body-tab">
                    <div class="mc-info-box">
                        üí¨ Each line appears in dialog body
                    </div>

                    <div id="body-lines-container"></div>

                    <button class="mc-button mc-button-green" onclick="addBodyLine()" style="width: 100%;">+ Add Line</button>
                </div>

                <!-- Inputs Tab -->
                <div class="tab-content" id="inputs-tab">
                    <div class="mc-tabs">
                        <button class="mc-tab active" data-subtab="textfields">Text</button>
                        <button class="mc-tab" data-subtab="selects">Dropdown</button>
                        <button class="mc-tab" data-subtab="checkboxes">Checkbox</button>
                    </div>

                    <div class="tab-content active" id="textfields-subtab">
                        <div id="textfields-container"></div>
                        <button class="mc-button mc-button-green" onclick="addTextField()" style="width: 100%;">+ Add Text Field</button>
                    </div>

                    <div class="tab-content" id="selects-subtab">
                        <div id="selects-container"></div>
                        <button class="mc-button mc-button-green" onclick="addSelect()" style="width: 100%;">+ Add Dropdown</button>
                    </div>

                    <div class="tab-content" id="checkboxes-subtab">
                        <div id="checkboxes-container"></div>
                        <button class="mc-button mc-button-green" onclick="addCheckbox()" style="width: 100%;">+ Add Checkbox</button>
                    </div>
                </div>

                <!-- Buttons Tab -->
                <div class="tab-content" id="buttons-tab">
                    <div class="mc-info-box">
                        üîò Clickable buttons with actions
                    </div>

                    <div id="buttons-container"></div>

                    <button class="mc-button mc-button-green" onclick="addButton()" style="width: 100%;">+ Add Button</button>
                </div>

                <div class="button-row">
                    <button class="mc-button mc-button-green" onclick="downloadJSON()" style="flex: 1;">üíæ Download</button>
                    <button class="mc-button mc-button-blue" onclick="loadExample()" style="flex: 1;">üìÇ Example</button>
                    <button class="mc-button mc-button-gold" onclick="document.getElementById('file-input').click()" style="flex: 1;">üìÅ Import</button>
                    <button class="mc-button mc-button-red" onclick="resetDialog()" style="flex: 1;">üóëÔ∏è Reset</button>
                    <input type="file" id="file-input" accept=".json" style="display: none;" onchange="importJSON(event)">
                </div>
            </div>

            <!-- Preview Panel -->
            <div class="mc-panel">
                <div class="mc-panel-title">üëÅÔ∏è Live Preview</div>

                <div class="mc-tabs">
                    <button class="mc-tab active" data-preview="visual">Visual</button>
                    <button class="mc-tab" data-preview="code">Code</button>
                </div>

                <div class="tab-content active" id="visual-preview">
                    <div class="preview-wrapper">
                        <div class="preview-background"></div>
                        <div class="preview-dialog" id="preview-container"></div>
                    </div>
                </div>

                <div class="tab-content" id="code-preview">
                    <div style="position: relative;">
                        <button class="mc-button mc-button-blue copy-json-btn" onclick="copyJSON()" style="position: absolute; top: 0.5rem; right: 0.5rem; padding: 0.5rem 1rem; font-size: 0.75rem;">üìã Copy</button>
                        <div class="code-preview" id="json-preview"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="github-link">
            If you find any issues or have feature ideas, please report them on <a href="https://github.com/TSERATO/FancyDialogs-Web-Editor" target="_blank">GitHub</a>
        </div>
    </div>

    <!-- Action Modal -->
    <div id="action-modal" class="mc-modal">
        <div class="mc-modal-content">
            <div class="mc-modal-header">Add Action</div>

            <label class="mc-label">Action Type:</label>
            <select class="mc-select" id="action-type" onchange="updateActionFields()">
                <option value="message">üí¨ Message</option>
                <option value="open_dialog">üìñ Open Dialog</option>
                <option value="open_random_dialog">üé≤ Random Dialog</option>
                <option value="console_command">‚å® Console Command</option>
                <option value="player_command">üë§ Player Command</option>
                <option value="send_to_server">üåê Transfer Server</option>
            </select>

            <div id="action-fields"></div>

            <div class="mc-modal-footer">
                <button class="mc-button mc-button-red" onclick="closeActionModal()">Cancel</button>
                <button class="mc-button mc-button-green" onclick="confirmAction()">Add</button>
            </div>
        </div>
    </div>

    <!-- Select Option Modal -->
    <div id="option-modal" class="mc-modal">
        <div class="mc-modal-content">
            <div class="mc-modal-header">Add Option</div>

            <label class="mc-label">Value (placeholder):</label>
            <input type="text" class="mc-input" id="option-value" placeholder="red">

            <label class="mc-label">Display Text:</label>
            <input type="text" class="mc-input" id="option-display" placeholder="<color:red>Red</color>">

            <div class="mc-checkbox-group">
                <input type="checkbox" class="mc-checkbox" id="option-initial">
                <label class="mc-label" for="option-initial" style="margin: 0;">Default Selection</label>
            </div>

            <div class="mc-modal-footer">
                <button class="mc-button mc-button-red" onclick="closeOptionModal()">Cancel</button>
                <button class="mc-button mc-button-green" onclick="confirmOption()">Add</button>
            </div>
        </div>
    </div>

    <script src="script.js?v=2"></script>
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</body>
</html>